<!doctype html>
<head>
  <meta charset="utf-8">

  <title>My Parse App</title>
  <meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
</head>

<body>
  
  <div id="main">
      
      <div id="current-user"></div>
   <!--   <h1>Log Out</h1>-->
      
     <!-- <form id="logout">
          <p><input id="logout-submit" type="submit" value="Log Out"></p>
      </form>
      
      <h1>Log In</h1>
      
      <form id="login">
         <p><input id="login-name" type="text"></p>
         <p><input id="login-password" type="password"></p>
         <p><input id="login-submit" type="submit" value="Log In"></p>
      </form>
      
      <h1>Sign Up</h1>
    
    <form id="signup">
        <p><input id="signup-name" type="text"></p>
        <p><input id="signup-password" type="password"></p>
        <p><input id="signup-submit" type="submit" value="Sign Up"></p>
    </form>-->
      
      <h1>Chat App</h1>
      
      <form id="post-form">
          <p><textarea id="post-content" rows="3" cols="50"></textarea></p>
          <p><button id="post-submit">submit</button></p>
          
      </form>
      
      <textarea id="post-list" rows="15" cols="50" id="aboutDescription"
    style="max-height:100px;min-height:200px; resize: none"></textarea>
      
  </div>
    
    <script type="text/javascript">
     Parse.initialize("dZ74uCxAUOOENhjY272iOCj6N8wc2xpowb95iRBH", "lj35BG28xcikpUMVnayTSVaCBvFrG2YEovliQDQ3");
      var Post=Parse.Object.extend("Post");
        
        /*For posting*/
        $("#post-form").submit(function(event){
            event.preventDefault();
            
            var content= $("#post-content").val();
            
            var newPost=new Post();
            newPost.set("chat",content);
            
            newPost.save(
                {success:function(){
                
                },
                 error:function(error){
                  console.log("error:"+error.message)    
                 }
                });
        });
        
        
        /*For retrieving the message*/
        
        function getPosts(){
            var query= new Parse.Query(Post);
            query.find({success:function(results){
                    for(var i in results){
                    var chat=results[i].get("chat");
                        output+="<p>"+chat+"</p>";
                    } 
                  $("#list-posts").html(output);
                },
                 error:function(error){
                  console.log("error:"+error.message)    
                 }
                });
           
        }
      
        getPosts();
      
        
  
    </script>

  
</body>

</html>
